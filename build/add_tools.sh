#!/bin/bash
#######################################
# Handle the installation of tools
#######################################
# Create the share folder
mkdir /tools/reports
# Ones via GIT repository cloning
git clone --depth 1 https://github.com/drwetter/testssl.sh /tools/testssl
git clone --depth 1 https://github.com/sullo/nikto.git /tools/nikto
git clone --depth 1 https://github.com/danielmiessler/SecLists.git /tools/sec-lists
git clone --depth 1 https://github.com/stamparm/identYwaf.git /tools/identYwaf
git clone --depth 1 https://github.com/danielmiessler/RobotsDisallowed.git /tools/robots-disallowed
git clone --depth 1 https://github.com/righettod/website-passive-reconnaissance.git /tools/website-passive-reconnaissance
git clone --depth 1 https://github.com/sqlmapproject/sqlmap.git /tools/sqlmap
git clone --depth 1 https://github.com/no0be/vhost-brute.sh.git /tools/vhost-brute
git clone --depth 1 https://github.com/infodox/python-pty-shells.git /tools/python-pty-shells
git clone --depth 1 https://github.com/rebootuser/LinEnum.git /tools/linux-enumeration
git clone --depth 1 https://github.com/mzet-/linux-exploit-suggester.git /tools/linux-exploit-suggester
git clone --depth 1 https://github.com/bitsadmin/wesng.git /tools/windows-exploit-suggester
git clone --depth 1 https://github.com/ticarpi/jwt_tool /tools/jwt-tool
git clone --depth 1 https://github.com/samratashok/nishang.git /tools/offensive-powershell-scripts
git clone --depth 1 https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite.git /tools/privilege-escalation-awesome-scripts-suite
git clone --depth 1 https://github.com/ptoomey3/evilarc.git /tools/evilarc
git clone --depth 1 https://github.com/digininja/RSMangler.git /tools/password-mangler
git clone --depth 1 https://github.com/jonaslejon/malicious-pdf.git /tools/malicious-pdf-generator
git clone --depth 1 https://github.com/secretsquirrel/SigThief.git /tools/sig-thief
cd /tmp
wget -q https://download.sysinternals.com/files/ProcessMonitor.zip -O procmon.zip
unzip procmon.zip
mv Procmon*.exe /tools/sig-thief/.
git clone --depth 1 https://github.com/tyleradams/json-toolkit.git /tools/json-toolkit
cd /tools/json-toolkit
sed -i 's/sudo//g' Makefile
make
make install
echo "cat before.xml | xml-to-json" > /tools/json-toolkit/sample-usage.txt
echo "See https://codefaster.substack.com/p/mastering-jq-xml-and-any-other-data" >> /tools/json-toolkit/sample-usage.txt
git clone https://github.com/arno-di-loreto/jq-and-openapi.git /tools/jq-openapi-filters-collection
cd /tools/jq-openapi-filters-collection
git pull --all
git clone --depth 1 https://github.com/internetwache/GitTools.git /tools/git-repo-recovery-toolkit
git clone --depth 1 https://github.com/Ganapati/RsaCtfTool.git /tools/rsa-recovery-toolkit
git clone --depth 1 https://github.com/dolevf/graphw00f.git /tools/graphw00f
git clone --depth 1 https://github.com/NickstaDB/xamarin-decompress.git /tools/xamarin-decompress
git clone --depth 1 https://github.com/floyd-fuh/JKS-private-key-cracker-hashcat.git /tools/prepare-jks-for-hashcat-cracking
git clone --depth 1 https://github.com/nccgroup/nmap-nse-vulnerability-scripts.git /tools/nccgroup-nmap-nse-scripts
git clone --depth 1 https://github.com/KINGSABRI/bigip2ip.git /tools/bigip-decoder
git clone --depth 1 https://github.com/cisagov/log4j-scanner.git /tools/log4shell-scanner
git clone --depth 1 https://github.com/Viralmaniar/MurMurHash.git /tools/murmurhash-generator
git clone --depth 1 https://github.com/badkeys/badkeys.git /tools/badkeys
cd /tools/badkeys
python3 setup.py install
bash getbl.sh
# Ones via release downloading
mkdir /tools/ysoserial
wget -q https://jitpack.io/com/github/frohoff/ysoserial/master-SNAPSHOT/ysoserial-master-SNAPSHOT.jar -O /tools/ysoserial/ysoserial.jar
mkdir /tools/all-the-package-names
wget -q https://github.com/nice-registry/all-the-package-names/raw/master/names.json -O /tools/all-the-package-names/names.json
mkdir /tools/venom-ovh
wget -q https://github.com/ovh/venom/releases/download/v1.0.0-rc.2/venom.linux-amd64 -O /tools/venom-ovh/venom
cd /tools/venom-ovh
chmod +x venom
./venom update
mkdir /tools/jdam
## Release home for JDAM: https://gitlab.com/michenriksen/jdam/-/releases
wget -q https://gitlab.com/api/v4/projects/22765596/packages/generic/jdam/0.2.0/jdam-linux-amd64-v0.2.0-alpha -O /tools/jdam/jdam
mkdir /tools/container-diff
wget -q https://storage.googleapis.com/container-diff/latest/container-diff-linux-amd64 -O /tools/container-diff/container-diff
wget -q https://raw.githubusercontent.com/GoogleContainerTools/container-diff/master/README.md -O /tools/container-diff/README.md
mkdir /tools/kiterunner
wget -q -O /tmp/kite.tar.gz https://github.com/assetnote/kiterunner/releases/download/v1.0.2/kiterunner_1.0.2_linux_amd64.tar.gz
tar -xf /tmp/kite.tar.gz -C /tools/kiterunner
wget -q -O /tmp/kite-large.tar.gz https://wordlists-cdn.assetnote.io/data/kiterunner/routes-large.kite.tar.gz
tar -xf /tmp/kite-large.tar.gz -C /tools/kiterunner
wget -q -O /tmp/kite-small.tar.gz https://wordlists-cdn.assetnote.io/data/kiterunner/routes-small.kite.tar.gz
tar -xf /tmp/kite-small.tar.gz -C /tools/kiterunner
wget -q -O /tools/kiterunner/README.md https://raw.githubusercontent.com/assetnote/kiterunner/main/readme.md
mkdir /tools/speedtest
wget -q -O /tools/speedtest/speedtest.tgz https://install.speedtest.net/app/cli/ookla-speedtest-1.0.0-x86_64-linux.tgz
cd /tools/speedtest
tar xf speedtest.tgz
rm speedtest.tgz
# One via repo cloning and local install
git clone --depth 1 https://github.com/EnableSecurity/wafw00f.git /tools/wafw00f
cd /tools/wafw00f; python3 setup.py install
# Ones via PIP
pip3 install shodan pycryptodomex httpie tabulate ansi2html asciinema droopescan pycurl wfuzz pipreqs regexploit name-that-hash mmh3 jmespath git-dumper pyjks dirsearch lxml signxml cryptography requests
# Ones via NPM
npm install -g retire js-beautify http-server
# One via GEM
gem install mdless ssh_scan
# Ones via GO install system
export GO111MODULE=on
go install github.com/ffuf/ffuf@latest
go install github.com/projectdiscovery/nuclei/v2/cmd/nuclei@latest
go install github.com/projectdiscovery/interactsh/cmd/interactsh-client@latest
go install github.com/OJ/gobuster/v3@latest
go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest
go install github.com/visma-prodsec/confused@latest
go install github.com/zricethezav/gitleaks@latest
go install github.com/wader/fq@latest
go install github.com/vdjagilev/nmap-formatter@latest
/root/go/bin/nuclei -update-templates
# -------
# Temporary patch for the python package "dnsdumpster"
# See https://github.com/PaulSec/API-dnsdumpster.com
# The version in pypi do not contain the patch to fix the error due to 
# change of the result format returned by dnsdumpster.com
# See https://github.com/PaulSec/API-dnsdumpster.com/commit/fa952c6cbdf32f70ed1af60ac318907898e0e8ac
pip3 uninstall --yes dnsdumpster
pip3 install https://github.com/PaulSec/API-dnsdumpster.com/archive/master.zip
# -------
# Generate "requirements.txt" file for custom python scripts
cd /tools/scripts
pipreqs . --force
